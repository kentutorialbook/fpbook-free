[[function]]
= 関数を知ろう
:sectnums:
ifndef::toc:[:toc: left]
ifndef::toplevels:[:toclevels: 2]
ifndef::stem[:stem: latexmath]
ifndef::icons[:icons: font]
ifndef::imagesdir[:imagesdir: ../img/]
ifndef::source-highlighter[:source-highlighter: highlightjs]
ifndef::highlightjs-theme:[:highlightjs-theme: tomorrow-night-eighties]
ifndef::icons[:icons: font]

++++
<style type="text/css">
th,td {
    border: solid 0px;
}　
p>code {background-color: #aaaaaa};
td>code {background-color: #aaaaaa};
</style>
++++

世界は関数で満ちあふれている・・・

なにはともあれ、まず関数(function)のことを知ろう。


[[know_function]]
== 関数

https://www.britannica.com/science/function-mathematics

**Function**, in mathematics, an expression, rule, or law that defines a relationship between one variable (the independent variable) and another variable (the dependent variable). Functions are ubiquitous in mathematics and are essential for formulating physical relationships in the sciences. The modern definition of function was first given in 1837 by the German mathematician Peter Dirichlet: This relationship is commonly symbolized as y = f(x).

数学における**関数**とは、ある変数（独立変数）ともう一つの変数（従属変数）との間の関係を定義する式、ルール、または法則です。関数は数学の至る所にあり、科学における物理的な関係を定式化するために必要不可欠です。現代の関数の定義は、1837年にドイツの数学者Peter Dirichletによって最初に与えられました。この関係は、一般的に y = f（x）として表記されます。


https://ja.wikipedia.org/wiki/%E4%BA%8C%E9%A0%85%E9%96%A2%E4%BF%82bi

関係の特別な場合として写像がある

== 関数の具体例

関数とはいったいどういうものなのか？具体例を見ていくとわかりやすいでしょう。

=== 国をインプットしたらその首都をアウトプットする `首都関数` 　

image::2-7-2020-12-40-51-PM.png[]

image::2-7-2020-12-43-43-PM.png[]

=== 国をインプットしたらその通貨をアウトプットする `通貨関数`

image::2-7-2020-12-44-49-PM.png[]

=== 英単語をインプットしたらその日本語をアウトプットする `英和関数`

image::2-7-2020-12-46-18-PM.png[]

image::2-7-2020-12-48-57-PM.png[]

英和辞書や和英辞書も関数の一種です。

もちろん最近では、Google翻訳とかになっています。

=== Google検索も関数

Googleの検索エンジンは巨大なデータベースで、膨大なWeb記事がランキングされてストックされています。 +
Google検索も、検索ワードがインプット、検索結果がアウトプットの関数です。

image::2-7-2020-12-51-01-PM.png[]

「必ず答えを返してくるやつ」です。

=== AIも関数

==== コンピュータビジョン（機械学習・AI）

image::2-7-2020-12-55-19-PM.png[]

事前に数万以上の手書き画像のデータを使って、アウトプット精度の高い関数を学習させておく（link:https://ja.wikipedia.org/wiki/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92[機械学習]）。

image::./00-mnist.png[]


== 関数のテーブル

簡単な構造の関数はテーブル（表）で表現できます。

Google検索やAI(機械学習)のコンピュータビジョンの関数はテーブルで表現するのは極めて困難でしょう。

==== 首都関数
[width=80%, cols="^,^"]
|===
|インプット|アウトプット

|イギリス
|ロンドン

|日本
|東京

|フランス
|パリ　

|アメリカ
|ワシントンD.C.
|===

==== 通貨関数
[width=80%, cols="^,^"]
|===
|インプット|アウトプット

|イギリス
|UKポンド

|日本
|円

|フランス
|ユーロ

|アメリカ
|USドル
|===

==== 英和関数
[width=80%, cols="^,^"]
|===
|インプット|アウトプット

|CAT
|猫

|DOG
|犬

|WATER　
|水

|BICYCLE
|自転車

|===

==== 気温関数

「気温　東京　年間」でGoogle検索すると、「過去の平均気温」という「データベース系の関数のテーブル」が出てきます。

image::./00-temp-tokyo.png[align="left"]

よく見ると、**グラフというタブも用意されています。**
　
==== 気温関数(グラフ)

image::./00-temp-tokyo-graph.png[align="left"]

このように、 +
*インプットが数値* +
*アウトプットが数値* +
の場合、 +
*インプットをX軸* +
*アウトプットをY軸* +
とした**２次元平面上にプロット**して、**関数をグラフとして視覚化すれば便利なケース**があります。

念の為に繰り返しますが今まで見てきたように、**関数はインプットとアウトプットがシンプルなテーブル(表)で表現できて、なおかつXY平面上にプロットが可能な数値であるとは限定されているわけではない**ので、あくまで特別なケースでしかありません。


== 数学法則を使う関数

Google検索、それから手書き文字などを識別するコンピュータビジョンのAIも含め、過去に蓄積されたデータベースを利用する関数がある一方で、そのようなデータベースを利用しない関数もあります。

数学法則を使う関数です。**数学法則というのは、なぜか最初から存在しているので、蓄積しておくべきデータなどは必要がありません。**

=== 絶対値を求める関数

image::2-7-2020-12-59-12-PM.png[]

=== ２倍する関数

image::2-7-2020-13-04-25-PM.png[]

=== ２倍する関数(テーブル)

[width=80%, cols="^,^"]
|===
|インプット|アウトプット

|1
|2

|2
|4

|3
|6　

|4
|8
|===

これは、気温のテーブルを二次元平面にプロットしてグラフにしたら役立ったのと同じ原理で、XY軸のグラフにできます。

=== ２倍する関数(XY軸のグラフ)

image::./00-y2x.png[]

=== ２倍する関数(XY変数のテーブル)

どうせ、X軸とY軸の二次元平面にプロットすることも見越して、一石二鳥を狙うような感じで、数学世界の慣習で、

**インプット側の数値の変数はXとする** +
**アウトプット側の数値の変数はYとする** +
ということに暗黙の了解としてなっており、

[width=80%, cols="^,^"]
|===
|X|Y

|1
|2

|2
|4

|3
|6　

|4
|8
|===

というように、変数XとYのテーブルで関数表現がされたりします。

=== ２倍する関数(XY変数の方程式)

[stem]
++++
y = 2x
++++

という方程式が関数になる、とヤブから棒に教えられることが多く、世の中学生や高校生が混乱しているようです。


== 関数の表記

いろんな関数が存在しています。

検索エンジンの場合は、

image::2-7-2020-12-51-01-PM.png[]

で、和訳するための和英辞書もひっくるめて、もっと一般化して、

データベースへのインプットとアウトプットのように表現できます。

image::2-7-2020-13-09-51-PM.png[]

事前のデータベースの用意が必要ない、あらかじめ存在する数学法則を使う関数もありました。

image::2-7-2020-13-04-25-PM.png[]

これも数式へのインプットとアウトプットのように表現できます。

image::2-7-2020-13-13-43-PM.png[]

いちいち、「インプット」「アウトプット」と書いてまわるのは大変なので、何でも良いですが、なんらかの簡潔な文字（数学の場合はたいていアルファベットかギリシャ文字）を割り当てて表現します。

image::2-7-2020-13-19-24-PM.png[]


関数の場合は、名前が何でも良いときは、関数（function）の頭文字のアルファベットの `f` が使われることが多く、「なんらかの関数」という意味で使われます。

つまり、`f` は、首都関数かもしれないし、翻訳関数かもしれない、Google検索エンジンかもしれない、AIかもしれない、数式かもしれない。

インプットは、慣例に従って `x` とすることが多いです。これも現状、なんらかの具体的な値が定まっているわけではありません。「インプット」という言葉の代わりに `x` と置き換えただけです。

アウトプットも同様に、「アウトプット」という言葉の代わりに `y` と置き換えると、数値の場合はそのままxy平面にプロットしてグラフとして視覚化しやすくなるのは説明したとおりです。

[cols="^,^",width=80%]
|================
|インプット  |stem:[x]
|アウトプット |stem:[y]
|================


ただし歴史的に、もっとも一般的には、ある関数 `f` のアウトプットは

image::6-7-2020-21-26-22-PM.png[]

stem:[f(x)]と表記します。

[cols="^,^",width=80%]
|================
|インプット  |stem:[x]
|アウトプット |stem:[f(x)]
|================


このアウトプットがY軸に対応する `y` の値となるような方程式なんですよ！とやっぱり宣言したい場合は、

stem:[y = f(x)]

と、あらためて別途追加で書けば良いことなので辻褄もあうでしょう。

image::2-7-2020-13-21-13-PM.png[]


[cols="^,^,^",width=80%]
|================
|インプット   |stem:[x]|stem:[x]
|アウトプット |stem:[y]|stem:[f(x)]
|================


